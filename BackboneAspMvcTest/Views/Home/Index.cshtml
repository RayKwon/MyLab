@if (false)
{
    <script src="../../Scripts/lib/jquery-1.7.2.js" type="text/javascript"></script>
    <script src="../../Scripts/lib/jquery-ui-1.8.20.js" type="text/javascript"></script>
    <script src="../../Scripts/lib/underscore.js" type="text/javascript"></script>
    <script src="../../Scripts/lib/backbone.js" type="text/javascript"></script>
    <script src="../../Scripts/lib/bootstrap.js" type="text/javascript"></script>
}
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <link href="@Url.Content("~/Content/bootstrap.css")" rel="stylesheet" type="text/css" />
    <style>
        body
        {
            padding-top: 45px;
            padding-bottom: 45px;
        }
    </style>
    <link href="@Url.Content("~/Content/bootstrap-responsive.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/vader/jquery-ui-1.8.20.custom.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/app.css")" rel="stylesheet" type="text/css" />
</head>
<body data-spy="scroll">
    <div id="RootView">
        <div id="TopView" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span
                        class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                    </a><a class="brand" href="@Url.Action("Index", "Home")">
                        <img src="@Url.Content("~/Content/images/ge_white.png")" style="margin-top: -5px;width:25px;height:23px"  />Clinical
                        Portal</a>
                    <div class="nav-collapse">
                        <ul class="nav">
                            <li id="home-nav"><a href="@Url.Action("Index", "Home")" ><i class="icon-home icon-white">
                            </i><b>Patient and Document</b></a> </li>
                            <li id="new-post-nav"><a href="@Url.Action("Create", "PnR")" ><i class="icon-pencil icon-white">
                            </i><b>Send Document</b></a> </li>
                        </ul>
                        <ul class="nav pull-right">
                            <li>
                                @*<form class="navbar-search" method="post">*@
                                <input id="patientSearchName" type="text" class="search-query" placeholder="Search Patient">
                                @*</form>*@
                            </li>
                        </ul>
                    </div>
                    <!--/.nav-collapse -->
                </div>
            </div>
        </div>
        <!-- end of top menu -->
        <div class="container-fluid">
            <div id="main-body" class="row-fluid">
                <div id="LeftView" class="span2">
                    <script type="text/template" id="patient-item-template">
                            <h3>
                                <a href="#"><%= FirstName %></a></h3>
                            <div>
                                <div>
                                    <p>
                                        <span><%= DateOfBirth %></span>&nbsp;
                                        <span class="badge"><%= Gender %></span>
                                    </p>
                                </div>
                                <ul>
                                    <li>List item one</li>
                                    <li>List item two</li>
                                    <li>List item three</li>
                                </ul>
                            </div>
                    </script>
                </div>
                <div id="ContentView" class="span10 well patient-detail" style="background: #333333;">
                    <div id="DetailView">
                        <span style="color: white">test</span></div>
                </div>
            </div>
        </div>
    </div>
    <!-- /container -->
    <script src="@Url.Content("~/Scripts/lib/jquery-1.7.2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/lib/jquery-ui-1.8.20.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/lib/modernizr-1.7.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/lib/bootstrap.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/lib/underscore.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/lib/backbone.js")" type="text/javascript"></script>
    <script>
        $(function () {
            //$("#accordion").accordion({ autoHeight: false, navigation: true });
        });
    </script>
    <script>

        var Patient = Backbone.Model.extend({
        });

        var Patients = Backbone.Collection.extend({
            model: Patient,
            url: "Api/Patients"
        });

        var RootView = Backbone.View.extend({
            el: $('#RootView'),
            initialize: function () {
                _.bindAll(this, "render", "searchPatientByName");
                this.collection = new Patients;
                this.render();
            },
            render: function () {
            },
            events: {
                "keyup #patientSearchName": "searchPatientByName"
            },
            searchPatientByName: function () {
                var self = this;
                $('#LeftView').html('');
                this.collection.fetch({ data: { name: $('#patientSearchName').val()} });
                this.collection.each(function(patient){
                    $('#LeftView').append(new PatientItemView({model:patient}).render().el);
                });
            }
        });
        var rootView = new RootView;

        var PatientItemView = Backbone.View.extend({
            tagName: 'div',
            id: 'accordion',
            template: _.template($('#patient-item-template').html()),
            initialize: function (options) {
                _.bindAll(this, "render", "close");
                this.model.on('change', this.render);
                this.model.on('destroy', this.close);
            },
            render: function () {
                $(this.el).html(this.template(this.model.toJSON()));
                $(this.el).accordion({ autoHeight: false, navigation: true });
                return this;
            },
            close: function () {
                $(this.el).unbind();
                $(this.el).remove();
            }
        });

        var ContentView = Backbone.View.extend({
            el: $('#ContentView'),
            initialize:function(){
            },
            render : function(){
            }
        });

        var DetailView = Backbone.View.extend({
            el: $('#DetailView'),
            initialize:function(){
            },
            render : function(){
            }
        });

        var PnrView = Backbone.View.extend({
            el: $(''),
            initialize:function(){
            },
            render : function(){
            }
        });

        var AppRouter = Backbone.Router.extend({
            initialize : function(){
                _.bindAll(this, "goToHome", "goToPatientListByName");
            },
            routes: {
                "patients:/name" : "goToPatientListByName"
            },
            goToPatientListByName : function(name){
                
            }
        });
        
        var appRouter = new AppRouter;
        Backbone.history.start();

        var vent = _.extend({}, Backbone.Events);
        
    </script>
</body>
</html>
