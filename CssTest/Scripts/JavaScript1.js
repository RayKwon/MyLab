(function (n) { var t = { viewports: [], activeViewport: -1, activeLayout: "SingleDocumentLayout", drawLayout: function () { var f = $(".ViewportOuter", $("#ViewArea")), n = t.layoutDefinitions[t.activeLayout], i, r, u; if (n == null && (alert("LayoutDefinition '" + t.activeLayout + "' not found, default to single document layout"), n = t.layoutDefinitions.SingleDocumentLayout), f.css("position", "absolute"), i = -1, r = -1, f.each(function (u) { n[u] != null ? (r = u, t.viewports[u].imageLoaded() || i != -1 || (i = u), $(this).css("visibility", "visible"), $(this).css("top", n[u].top), $(this).css("left", n[u].left), $(this).css("width", n[u].width), $(this).css("height", n[u].height)) : (u == t.activeViewport && (t.activeViewport = r, t.viewports[r].onFocus()), t.viewports[u].clear(), $(this).css("visibility", "hidden"), $(this).css("width", 0), $(this).css("height", 0)) }), i != -1) { for (u = 0; u < 4; u++) this.viewports[u].onBlur(); this.viewports[i].onFocus(), this.activeViewport = i } }, layoutDefinitions: { SingleDocumentLayout: [{ top: "0pt", left: "0pt", width: "100%", height: "100%" }], DoubleDocumentVerticalLayout: [{ top: "0pt", left: "0pt", width: "50%", height: "100%" }, { top: "0pt", left: "50%", width: "50%", height: "100%" }], DoubleDocumentHorizontalLayout: [{ top: "0pt", left: "0pt", width: "100%", height: "50%" }, { top: "50%", left: "0pt", width: "100%", height: "50%" }], TripleDocumentLeftLayout: [{ top: "0pt", left: "0pt", width: "50%", height: "100%" }, { top: "0pt", left: "50%", width: "50%", height: "50%" }, { top: "50%", left: "50%", width: "50%", height: "50%" }], TripleDocumentRightLayout: [{ top: "0pt", left: "0pt", width: "50%", height: "50%" }, { top: "0pt", left: "50%", width: "50%", height: "100%" }, { top: "50%", left: "0pt", width: "50%", height: "50%" }], QuadrupleDocumentLayout: [{ top: "0pt", left: "0pt", width: "50%", height: "50%" }, { top: "0pt", left: "50%", width: "50%", height: "50%" }, { top: "50%", left: "0pt", width: "50%", height: "50%" }, { top: "50%", left: "50%", width: "50%", height: "50%" }] }, onFocusChanged: function (n, i) { t.activeViewport = i }, setLayout: function (n, i) { i != t.activeLayout && (t.activeLayout = i, t.drawLayout(), $(window).trigger(piv.common.event.DocumentViewerResizeEvent)) } }; n.init = function () { for (var n = 0; n < 4; n++) t.viewports[n] = piv.Viewport.Viewport($("#ViewArea"), n); t.drawLayout(), $(document).bind(piv.common.event.DocumentViewerFocusChangedEvent, t.onFocusChanged), $(document).bind(piv.common.event.DocumentViewerLayoutChangedEvent, t.setLayout) }, n.getActiveViewport = function () { return t.viewports[t.activeViewport] }, n.getViewportByIndex = function (n) { return t.viewports[n] }, n.sizeTo = function (n, t) { var r = 2, i = $("#ViewArea"); i.height(t - r), i.width(n - r) } })(ns.create("piv.ViewArea"));